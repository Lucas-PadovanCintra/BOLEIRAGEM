<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h2 fw-bold text-dark"><%= @player.name %></h1>
    <div class="btn-group">
      <%#= link_to "Editar Jogador", edit_player_path(@player), class: "btn btn-warning" %>
      <%= link_to "Voltar ao Mercado", players_path, class: "btn btn-secondary" %>
    </div>
  </div>

  <div class="row g-4">
    <!-- Player Info -->
    <div class="col-lg-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <h2 class="card-title h5 fw-bold text-dark mb-3">Detalhes do Jogador</h2>
          <div class="row g-2">
            <div class="col-12">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Nome:</span>
                <span class="fw-medium"><%= @player.name %></span>
              </div>
            </div>
            <div class="col-12">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Time Real:</span>
                <span class="fw-medium"><%= @player.real_team_name %></span>
              </div>
            </div>
            <div class="col-12">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Posi√ß√£o:</span>
                <span class="fw-medium"><%= @player.position || 'N/A' %></span>
              </div>
            </div>
            <div class="col-12">
              <div class="d-flex justify-content-between align-items-center">
                <span class="text-muted">Rating:</span>
                <div class="d-flex align-items-center">
                  <span class="fs-5 fw-bold text-primary me-2"><%= number_with_precision(@player.rating, precision: 1) %></span>
                  <div class="d-flex">
                    <% (1..5).each do |i| %>
                      <% if i <= (@player.rating / 2.0).ceil %>
                        <i class="fas fa-star text-warning"></i>
                      <% else %>
                        <i class="far fa-star text-muted"></i>
                      <% end %>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Pre√ßo:</span>
                <span class="fs-5 fw-bold text-success">üí∞<%= number_with_delimiter(@player.price) %></span>
              </div>
            </div>
            <div class="col-12">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Status no Mercado:</span>
                <% if @player.is_on_market %>
                  <span class="badge bg-success">Dispon√≠vel</span>
                <% else %>
                  <span class="badge bg-danger">Contratado</span>
                <% end %>
              </div>
            </div>
          </div>
        </div>
        <% if @player.is_on_market %>
          <div class="card-footer">
            <%= link_to "Contratar Jogador", new_player_contract_path(player_id: @player.id), class: "btn btn-success w-100" %>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Player Stats -->
    <div class="col-lg-8">
      <div class="card shadow-sm">
        <div class="card-body">
          <h2 class="card-title h5 fw-bold text-dark mb-3">Estat√≠sticas do Jogador na vida real</h2>
          <div class="row g-2">
            <div class="col-md-4">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Gols:</span>
                <span class="fw-medium"><%= @player.goals || 0 %></span>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Assist√™ncias:</span>
                <span class="fw-medium"><%= @player.assists || 0 %></span>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Dribles Bem-Sucedidos:</span>
                <span class="fw-medium"><%= @player.successful_dribbles || 0 %></span>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Intercepta√ß√µes:</span>
                <span class="fw-medium"><%= @player.interceptions || 0 %></span>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Cart√µes Amarelos:</span>
                <span class="fw-medium"><%= @player.yellow_cards || 0 %></span>
              </div>
            </div>
            <div class="col-md-4">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Cart√µes Vermelhos:</span>
                <span class="fw-medium"><%= @player.red_cards || 0 %></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Contract History -->
    <div class="col-lg-8">
      <div class="card shadow-sm">
        <div class="card-body">
          <h2 class="card-title h5 fw-bold text-dark mb-3">Hist√≥rico de Contratos</h2>
          <% if @player.player_contracts.any? %>
            <div class="table-responsive">
              <table class="table table-hover">
                <thead class="table-light">
                  <tr>
                    <th scope="col" class="fw-bold text-muted small text-uppercase">Time</th>
                    <th scope="col" class="fw-bold text-muted small text-uppercase">Status</th>
                    <th scope="col" class="fw-bold text-muted small text-uppercase">Criado em</th>
                  </tr>
                </thead>
                <tbody>
                  <% @player.player_contracts.includes(:team).order(created_at: :desc).each do |contract| %>
                    <tr>
                      <td class="fw-medium"><%= link_to contract.team.name, player_contract_path(contract) %></td>
                      <td>
                        <% if contract.is_expired %>
                          <span class="badge bg-secondary">Expirado</span>
                        <% else %>
                          <span class="badge bg-success">Ativo</span>
                        <% end %>
                      </td>
                      <td class="text-muted"><%= contract.created_at.strftime("%B %d, %Y") %></td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </div>
          <% else %>
            <div class="text-center py-4">
              <p class="text-muted mb-0">Nenhum hist√≥rico de contratos dispon√≠vel.</p>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
